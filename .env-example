# EasyAppointments Production Environment Configuration
# Copy this file to .env and customize for production
# 
# SECURITY WARNING: 
# - Never commit .env to version control
# - Replace all CHANGE_THIS_* placeholders
# - The deploy-production.sh script can auto-generate secure values

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================

APP_ENV=production
APP_DEBUG=false
APP_URL=http://localhost
APP_TIMEZONE=America/Sao_Paulo
APP_LANGUAGE=english

# =============================================================================
# TIMEZONE (Critical for all containers)
# =============================================================================
# Define timezone for entire stack (PHP, MySQL, Workers, Cron, etc)
# This ensures consistent timestamp handling across all services
TZ=America/Sao_Paulo

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

DB_CONNECTION=mysql
DB_HOST=mysql
DB_PORT=3306
DB_DATABASE=easyappointments
DB_USERNAME=easyapp_user

# CHANGE THIS: Database password (auto-generated by script or set manually)
# Generate with: openssl rand -base64 24 | tr -d "=+/"
DB_PASSWORD=CHANGE_THIS_STRONG_PASSWORD

# CHANGE THIS: MySQL root password (auto-generated by script or set manually)
# Generate with: openssl rand -base64 32 | tr -d "=+/"
MYSQL_ROOT_PASSWORD=CHANGE_THIS_ROOT_PASSWORD

# =============================================================================
# NETWORK PORTS
# =============================================================================

# HTTP port for web access
HTTP_PORT=80

# HTTPS port for secure web access
HTTPS_PORT=443

# MySQL external port (can be disabled by commenting out in docker-compose.yml)
MYSQL_PORT=3306

# =============================================================================
# SECURITY & ENCRYPTION
# =============================================================================

# CHANGE THIS: WhatsApp token encryption key (64 chars hex)
# Generate with: openssl rand -hex 32
WA_TOKEN_ENC_KEY=CHANGE_THIS_GENERATE_NEW_KEY_WITH_OPENSSL

# CHANGE THIS: Backup encryption key (64 chars hex)
# Generate with: openssl rand -hex 32
BACKUP_ENCRYPTION_KEY=CHANGE_THIS_BACKUP_KEY

# =============================================================================
# WHATSAPP INTEGRATION (WPPConnect)
# =============================================================================

# **REQUIRED IN PRODUCTION** WhatsApp token encryption key (64 chars hex, 32 bytes)
# Generate with: openssl rand -hex 32
# CRITICAL: Without this key, WhatsApp tokens cannot be encrypted in production
# The application will REFUSE TO START in production without this key
WA_TOKEN_ENC_KEY=CHANGE_THIS_GENERATE_WITH_OPENSSL_RAND_HEX_32

# Timeout for WhatsApp operations (seconds)
WPPCONNECT_TIMEOUT=30

# Connection timeout (seconds)
WPPCONNECT_CONNECT_TIMEOUT=10

# WhatsApp routine execution window (minutes)
# This defines how far in the past the system will look for missed routine sends
# Recommended: 10-15 minutes to handle worker delays and timing issues
WHATSAPP_ROUTINE_WINDOW_MINUTES=10

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================

# SMTP server for sending emails
MAIL_HOST=smtp.example.com
MAIL_PORT=587
MAIL_USERNAME=your-email@example.com
MAIL_PASSWORD=your-email-password
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=noreply@example.com
MAIL_FROM_NAME="EasyAppointments"

# =============================================================================
# LOGGING
# =============================================================================

# Log level: emergency, alert, critical, error, warning, notice, info, debug
LOG_LEVEL=warning
LOG_CHANNEL=stack

# =============================================================================
# SSL/TLS CONFIGURATION (Optional)
# =============================================================================

# Uncomment and set if using HTTPS with SSL certificates
#SSL_CERT_PATH=/path/to/ssl/cert.pem
#SSL_KEY_PATH=/path/to/ssl/private.key
#SSL_CA_PATH=/path/to/ssl/ca-bundle.crt

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================

# Number of days to retain backups
BACKUP_RETENTION_DAYS=30

# Maximum number of backups to keep
BACKUP_MAX_COUNT=10

# =============================================================================
# DOCKER COMPOSE SETTINGS
# =============================================================================

# Project name for Docker Compose (isolates from dev environment)
COMPOSE_PROJECT_NAME=easyappointments_prod

# Force update assets on container start
FORCE_UPDATE=false

# =============================================================================
# OPTIONAL: GOOGLE CALENDAR SYNC
# =============================================================================

# Enable Google Calendar synchronization (set in config.php)
#GOOGLE_SYNC_FEATURE=false
#GOOGLE_CLIENT_ID=
#GOOGLE_CLIENT_SECRET=

# =============================================================================
# OPTIONAL: LDAP INTEGRATION
# =============================================================================

#LDAP_ENABLED=false
#LDAP_HOST=ldap://ldap.example.com
#LDAP_PORT=389
#LDAP_BASE_DN=dc=example,dc=com

# =============================================================================
# OPTIONAL: ANALYTICS
# =============================================================================

#GOOGLE_ANALYTICS_ID=
#MATOMO_URL=
#MATOMO_SITE_ID=

# =============================================================================
# CONTAINER RESOURCE LIMITS (Optional)
# =============================================================================

# Uncomment to set memory/CPU limits
#PHP_FPM_MEMORY_LIMIT=512M
#PHP_FPM_MAX_CHILDREN=20
#MYSQL_MEMORY_LIMIT=1G
#NGINX_WORKER_PROCESSES=auto
#NGINX_WORKER_CONNECTIONS=1024
